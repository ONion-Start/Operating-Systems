import com.google.gson.Gson;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonArray;

import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

public class JsonToTextConverter {

    public static void main(String[] args) {
        String inputFile = "input.json"; // Путь к входному JSON файлу
        String outputFile = "output.txt"; // Путь к выходному текстовому файлу

        // Создаем объект GSon для обработки JSON
        Gson gson = new Gson();

        try (FileReader reader = new FileReader(inputFile)) {
            // Читаем данные из JSON файла
            JsonElement jsonElement = gson.fromJson(reader, JsonElement.class);

            // Преобразуем JSON в строку, исключив все структурные элементы
            String result = convertJsonToText(jsonElement);

            // Записываем результат в выходной файл
            try (FileWriter writer = new FileWriter(outputFile)) {
                writer.write(result);
            }

            System.out.println("Данные успешно сконвертированы в текстовый файл!");

        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    // Метод для преобразования JSON в текст (без кавычек, фигурных скобок и запятых)
    private static String convertJsonToText(JsonElement jsonElement) {
        StringBuilder text = new StringBuilder();

        // Если это объект JSON
        if (jsonElement.isJsonObject()) {
            JsonObject jsonObject = jsonElement.getAsJsonObject();
            for (String key : jsonObject.keySet()) {
                text.append(key).append(": ");
                text.append(convertJsonToText(jsonObject.get(key))); // Рекурсивно обрабатываем значение
                text.append("\n");
            }
        }
        // Если это массив JSON
        else if (jsonElement.isJsonArray()) {
            JsonArray jsonArray = jsonElement.getAsJsonArray();
            for (JsonElement element : jsonArray) {
                text.append(convertJsonToText(element)); // Рекурсивно обрабатываем каждый элемент массива
                text.append("\n");
            }
        }
        // Если это простое значение (строка, число, булевый тип)
        else if (jsonElement.isJsonPrimitive()) {
            text.append(jsonElement.getAsString());
        }

        return text.toString();
    }
}
